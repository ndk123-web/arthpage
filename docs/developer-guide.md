# Developer Guide

This guide details the setup process for developing and contributing to ArthaPage. It covers installation, environment configuration, and local model setup (Ollama).

## Prerequisites

Ensure you have the following installed:

- **Node.js**: v18 or newer recommended.
- **Package Manager**: npm, yarn, or pnpm.

## 1. Installation

Clone the repository and install dependencies:

```bash
git clone https://github.com/Start-Up-code/First-Web-Extension.git
cd First-Web-Extension
npm install
```

## 2. Development Workflow

We leverage **Vite** and the **CRXJS** plugin to provide a modern development environment with Hot Module Replacement (HMR).

### Start the Development Server

```bash
npm run dev
```

This command:
1.  Starts a local server.
2.  Watches for file changes.
3.  Outputs build artifacts to the `dist/` directory.

### Loading the Extension

1.  Open Chrome, Brave, or Edge.
2.  Navigate to `chrome://extensions/`.
3.  Enable **Developer Mode** (top-right corner).
4.  Click **Load unpacked**.
5.  Select the `dist/` directory generated by the build process.

> **Note:** Changes to UI components (React) usually hot-reload immediately. Modifications to `manifest.json` or `background.ts` may require manually reloading the extension via the browser's extension page.

## 3. Production Build

To generate optimized artifacts suitable for distribution (e.g., zip release or Chrome Web Store):

```bash
npm run build
```

The output will be located in `dist/`.

## 4. Configuring Local LLM (Ollama)

To use local models via Ollama, you must configure Cross-Origin Resource Sharing (CORS) to allow the extension to communicate with your local Ollama instance.

### Step 1: Install Ollama

Download and install Ollama from [ollama.com](https://ollama.com).

### Step 2: Configure Environment Variables

By default, Ollama restricts API access to same-origin requests. You need to set the `OLLAMA_ORIGINS` environment variable to allow browser requests.

#### Windows (PowerShell)

Run the following command to set the environment variable persistently:

```powershell
[Environment]::SetEnvironmentVariable("OLLAMA_ORIGINS", "*", "User")
```

After running this command, **restart your computer** or restart the Ollama application from the taskbar for changes to take effect.

#### macOS / Linux

If running Ollama via command line:

```bash
OLLAMA_ORIGINS="*" ollama serve
```

For a permanent macOS service configuration:
1.  Run `launchctl setenv OLLAMA_ORIGINS "*"`.
2.  Restart the Ollama application.

### Step 3: Verify Connection

1.  Ensure Ollama is running (`ollama serve`).
2.  Open the ArthaPage extension sidebar.
3.  Select **Mode: Local (Ollama)**.
4.  Enter `http://localhost:11434` (default) as the URL.
5.  Available models should now populate the dropdown.

## 5. Technology Stack

- **Frontend**: React, TypeScript, Tailwind CSS.
- **Build System**: Vite, CRXJS.
- **Icons**: Lucide React.
- **Components**: Shadcn UI (Radix Primitives).

